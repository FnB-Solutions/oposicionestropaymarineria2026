<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Noticias de Reclutamiento — OPM Tropa y Marinería 2026</title>
<meta name="description" content="Últimas noticias oficiales sobre convocatorias de Tropa y Marinería 2026. BOE, plazas, fechas de examen y baremos actualizados cada día.">
<link rel="canonical" href="https://oposicionestropaymarineria2026.com/noticias">
<meta property="og:type" content="website">
<meta property="og:url" content="https://oposicionestropaymarineria2026.com/noticias">
<meta property="og:title" content="Noticias Reclutamiento Tropa y Marinería 2026 — OPM">
<meta property="og:description" content="Fuentes oficiales, BOE y novedades del proceso selectivo 2026. Actualizadas a diario.">
<link rel="alternate" type="application/rss+xml" title="OPM Noticias RSS" href="/feed.xml">
<link rel="alternate" type="application/json" title="OPM Noticias JSON" href="/api/noticias">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "OPM — Noticias de Reclutamiento",
  "url": "https://oposicionestropaymarineria2026.com/noticias",
  "description": "Noticias diarias sobre convocatorias de Tropa y Marinería 2026",
  "publisher": {
    "@type": "Organization",
    "name": "OPM",
    "url": "https://oposicionestropaymarineria2026.com"
  }
}
</script>

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer=window.dataLayer||[];
  function gtag(){dataLayer.push(arguments);}
  gtag('js',new Date());gtag('config','G-XXXXXXXXXX');
  function trackEvent(n,p){gtag('event',n,p);}
</script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Crimson+Pro:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
<style>
  :root{--verde:#3a4a2e;--verde-c:#4e6238;--verde-o:#1a2412;--dorado:#c9a84c;--dorado-c:#e8c96a;--crema:#f5f0e8;--gris:#8a8a7a;--gris-c:#b0ad9e;--negro:#0e1009;}
</style>
</head>
<body>

<!-- WhatsApp flotante -->
<a href="https://wa.me/34XXXXXXXXX?text=Quiero%20unirme%20a%20OPM" class="wsp-fixed" target="_blank" rel="noopener" onclick="trackEvent('click_whatsapp',{location:'floating'})">
  <svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.135.561 4.14 1.541 5.873L0 24l6.29-1.513A11.946 11.946 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 21.818a9.818 9.818 0 01-5.007-1.37l-.36-.213-3.733.897.934-3.622-.234-.373A9.818 9.818 0 012.182 12C2.182 6.575 6.575 2.182 12 2.182S21.818 6.575 21.818 12 17.425 21.818 12 21.818z"/></svg>
  Únete al grupo
</a>

<!-- NAV -->
<nav class="nav">
  <a href="index.html" class="nav-logo">
    <img src="assets/logo.png" alt="OPM Logo" width="48" height="48" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">
    <span class="nav-logo-text" style="display:none">OPM</span>
  </a>
  <ul class="nav-links">
    <li><a href="index.html#servicios">Servicios</a></li>
    <li><a href="noticias.html" style="color:var(--dorado)">Noticias</a></li>
    <li><a href="index.html#testimonios">Equipo</a></li>
    <li><a href="index.html#contacto">Contacto</a></li>
  </ul>
  <a href="https://wa.me/34XXXXXXXXX" class="nav-cta" target="_blank" rel="noopener">Únete ahora</a>
  <button class="nav-burger" aria-label="Menú" onclick="document.getElementById('navMobile').classList.toggle('open')">
    <span></span><span></span><span></span>
  </button>
</nav>
<div class="nav-mobile" id="navMobile">
  <a href="index.html#servicios">Servicios</a>
  <a href="noticias.html">Noticias</a>
  <a href="index.html#contacto">Contacto</a>
  <a href="https://wa.me/34XXXXXXXXX" class="mobile-wsp" target="_blank" rel="noopener">Únete al grupo WhatsApp</a>
</div>

<!-- HEADER DE PÁGINA -->
<header class="news-page-header">
  <div class="inner">
    <div class="section-label">Actualización diaria · Fuentes oficiales</div>
    <h1 class="section-title">Noticias de reclutamiento</h1>
    <div class="section-line"></div>
    <p style="color:var(--gris-c);font-size:1rem;max-width:560px;">
      Seguimiento diario de convocatorias, cambios en el BOE y novedades del proceso selectivo para Tropa y Marinería 2026. Fuentes: Ministerio de Defensa, Reclutamiento oficial.
    </p>
    <div style="margin-top:1.2rem;display:flex;gap:1rem;flex-wrap:wrap;">
      <a href="/feed.xml" style="font-family:Oswald,sans-serif;font-size:0.7rem;letter-spacing:.14em;text-transform:uppercase;color:var(--dorado);border:1px solid rgba(201,168,76,.35);padding:.35rem .85rem;">
        ↓ RSS Feed
      </a>
      <a href="/api/noticias" style="font-family:Oswald,sans-serif;font-size:0.7rem;letter-spacing:.14em;text-transform:uppercase;color:var(--gris-c);border:1px solid rgba(140,140,120,.25);padding:.35rem .85rem;">
        ↓ JSON Feed
      </a>
    </div>
  </div>
</header>

<!-- LISTADO DE NOTICIAS -->
<main class="news-list">
  <!-- Filtros -->
  <div class="news-filters">
    <select id="filterFuente" onchange="applyFilters()">
      <option value="">Todas las fuentes</option>
      <option value="ministerio">Ministerio de Defensa</option>
      <option value="boe">BOE</option>
      <option value="ejercito">Ejército de Tierra</option>
      <option value="armada">Armada</option>
      <option value="aire">Ejército del Aire</option>
    </select>
    <select id="filterMes" onchange="applyFilters()">
      <option value="">Todos los meses</option>
      <option value="2026-02">Febrero 2026</option>
      <option value="2026-01">Enero 2026</option>
      <option value="2025-12">Diciembre 2025</option>
    </select>
    <button class="btn-outline" onclick="resetFilters()" style="padding:.5rem 1rem;font-size:.75rem;">
      Limpiar filtros
    </button>
    <span id="filterCount" style="font-family:Oswald,sans-serif;font-size:0.7rem;letter-spacing:.1em;color:var(--gris);margin-left:auto;"></span>
  </div>

  <!-- Admin panel (solo visible con token) -->
  <div id="adminPanel" style="display:none;background:rgba(26,36,18,.8);border:1px solid var(--dorado);padding:1.5rem;margin-bottom:2rem;">
    <div style="font-family:Oswald,sans-serif;font-size:.75rem;letter-spacing:.15em;color:var(--dorado);margin-bottom:1rem;">PANEL ADMIN — PUBLICAR NOTICIA</div>
    <form onsubmit="publishNoticia(event)" style="display:grid;gap:.8rem;">
      <input type="text" id="adminTitulo" placeholder="Título de la noticia" required style="background:rgba(34,46,24,.7);border:1px solid rgba(78,98,56,.5);color:var(--crema);font-family:'Crimson Pro',serif;padding:.7rem;outline:none;">
      <textarea id="adminResumen" placeholder="Resumen (150-250 caracteres)" required style="background:rgba(34,46,24,.7);border:1px solid rgba(78,98,56,.5);color:var(--crema);font-family:'Crimson Pro',serif;padding:.7rem;height:80px;outline:none;resize:none;"></textarea>
      <input type="url" id="adminUrl" placeholder="URL fuente oficial" style="background:rgba(34,46,24,.7);border:1px solid rgba(78,98,56,.5);color:var(--crema);font-family:'Crimson Pro',serif;padding:.7rem;outline:none;">
      <label style="font-family:Oswald,sans-serif;font-size:.7rem;letter-spacing:.1em;color:var(--gris-c);display:flex;align-items:center;gap:.5rem;">
        <input type="checkbox" id="adminOficial"> Marcar como Reclutamiento Oficial
      </label>
      <button type="submit" class="btn-primary" style="align-self:flex-start">Publicar noticia</button>
      <div id="adminMsg" style="display:none;font-family:Oswald,sans-serif;font-size:.75rem;letter-spacing:.08em;color:var(--dorado);"></div>
    </form>
  </div>

  <!-- Grid de noticias -->
  <div class="news-list-grid" id="newsListGrid">
    <div class="noticia-skeleton"></div>
    <div class="noticia-skeleton"></div>
    <div class="noticia-skeleton"></div>
    <div class="noticia-skeleton"></div>
    <div class="noticia-skeleton"></div>
    <div class="noticia-skeleton"></div>
  </div>

  <!-- Paginación -->
  <div class="pagination" id="pagination"></div>
</main>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-inner">
    <div class="footer-logo">
      <img src="assets/logo-white.png" alt="OPM" width="40" height="40" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">
      <span class="footer-logo-text" style="display:none">OPM</span>
    </div>
    <div class="footer-links">
      <a href="index.html">Inicio</a>
      <a href="index.html#servicios">Servicios</a>
      <a href="privacidad.html">Política de privacidad</a>
      <a href="aviso-legal.html">Aviso legal</a>
    </div>
    <div class="footer-wsp">
      <a href="https://wa.me/34XXXXXXXXX" class="btn-primary" target="_blank" rel="noopener"
         onclick="trackEvent('click_whatsapp',{location:'footer'})">
        Únete al grupo de WhatsApp
      </a>
    </div>
    <div class="footer-legal">
      <p>© 2026 OPM — Preparación Tropa y Marinería. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<script>
  // ---- Admin access ----
  const params = new URLSearchParams(location.search);
  if (params.get('token') === 'OPM_ADMIN_TOKEN_AQUI') {
    document.getElementById('adminPanel').style.display = 'block';
  }

  // ---- Load & render noticias ----
  let allNoticias = [];
  let currentPage = 1;
  const PER_PAGE = 9;

  async function loadNewsPage() {
    try {
      const res = await fetch('/api/noticias?limit=100');
      const data = await res.json();
      allNoticias = data.noticias || [];
    } catch {
      allNoticias = getDemoNoticias();
    }
    applyFilters();
  }

  function applyFilters() {
    currentPage = 1;
    const fuente = document.getElementById('filterFuente').value.toLowerCase();
    const mes = document.getElementById('filterMes').value;
    let filtered = allNoticias.filter(n => {
      if (fuente && !((n.fuente||'').toLowerCase().includes(fuente))) return false;
      if (mes && !n.fecha.startsWith(mes)) return false;
      return true;
    });
    document.getElementById('filterCount').textContent = `${filtered.length} noticia${filtered.length !== 1 ? 's' : ''}`;
    renderPage(filtered);
  }

  function resetFilters() {
    document.getElementById('filterFuente').value = '';
    document.getElementById('filterMes').value = '';
    applyFilters();
  }

  function renderPage(noticias) {
    const start = (currentPage - 1) * PER_PAGE;
    const page = noticias.slice(start, start + PER_PAGE);
    const grid = document.getElementById('newsListGrid');
    grid.innerHTML = '';

    page.forEach(n => {
      const div = document.createElement('div');
      div.className = 'noticia-card';
      div.innerHTML = `
        <span class="noticia-fecha">${formatFecha(n.fecha)}</span>
        ${n.oficial ? '<span class="noticia-tag">Reclutamiento Oficial</span>' : ''}
        <div class="noticia-titulo">${esc(n.titulo)}</div>
        <div class="noticia-resumen">${esc(n.resumen)}</div>
        <div class="noticia-actions">
          ${n.url ? `<a href="${n.url}" class="noticia-link" target="_blank" rel="noopener"
            onclick="trackEvent('article_read',{title:'${esc(n.titulo)}'})">Fuente oficial →</a>` : ''}
          <a href="https://wa.me/?text=${encodeURIComponent(n.titulo+' '+( n.url||'https://oposicionestropaymarineria2026.com'))}"
             class="noticia-wsp" target="_blank" rel="noopener"
             onclick="trackEvent('noticia_share_wsp',{title:'${esc(n.titulo)}'})">
            Compartir
          </a>
        </div>
      `;
      grid.appendChild(div);
    });

    // Pagination
    const pages = Math.ceil(noticias.length / PER_PAGE);
    const pag = document.getElementById('pagination');
    pag.innerHTML = '';
    for (let i = 1; i <= pages; i++) {
      const btn = document.createElement('button');
      btn.className = 'page-btn' + (i === currentPage ? ' active' : '');
      btn.textContent = i;
      btn.onclick = () => { currentPage = i; renderPage(noticias); window.scrollTo({top:0,behavior:'smooth'}); };
      pag.appendChild(btn);
    }
  }

  // ---- Publish noticia (admin) ----
  async function publishNoticia(e) {
    e.preventDefault();
    const noticia = {
      titulo: document.getElementById('adminTitulo').value,
      resumen: document.getElementById('adminResumen').value,
      url: document.getElementById('adminUrl').value,
      oficial: document.getElementById('adminOficial').checked,
      fecha: new Date().toISOString().split('T')[0]
    };
    const token = new URLSearchParams(location.search).get('token');
    try {
      const r = await fetch('/api/noticias', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'X-Admin-Token': token },
        body: JSON.stringify(noticia)
      });
      if (r.ok) {
        const msg = document.getElementById('adminMsg');
        msg.textContent = '✓ Noticia publicada correctamente.';
        msg.style.display = 'block';
        e.target.reset();
        loadNewsPage();
      }
    } catch { alert('Error al publicar. Revisa el token.'); }
  }

  function formatFecha(iso) {
    if (!iso) return '';
    return new Date(iso).toLocaleDateString('es-ES', { year:'numeric', month:'long', day:'numeric' });
  }
  function esc(s) {
    return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  function getDemoNoticias() {
    return [
      { titulo:'Convocatoria Tropa y Marinería 2026 publicada en el BOE', resumen:'El Ministerio de Defensa ha publicado la resolución con las plazas disponibles para los tres ejércitos.', fecha:'2026-02-10', url:'https://www.boe.es', oficial:true, fuente:'boe' },
      { titulo:'Nuevos baremos físicos para la convocatoria 2026', resumen:'Se actualizan los tiempos de carrera y las marcas mínimas de natación para esta edición.', fecha:'2026-02-06', url:'https://reclutamiento.defensa.gob.es', oficial:true, fuente:'ministerio' },
      { titulo:'Plazas de marinería en la Armada: plazo de solicitud abierto', resumen:'Ya está disponible la presentación de instancias para las plazas de marinero profesional 2026.', fecha:'2026-01-28', url:'https://armada.defensa.gob.es', oficial:true, fuente:'armada' },
      { titulo:'Calendario psicotécnicos Ejército de Tierra 2026', resumen:'Publicadas fechas y sedes para las pruebas de aptitud psicológica del proceso selectivo.', fecha:'2026-01-20', url:'https://ejercito.defensa.gob.es', oficial:true, fuente:'ejercito' },
      { titulo:'Nuevas especialidades Ejército del Aire para 2026', resumen:'La convocatoria incluye plazas técnicas de nueva creación en mantenimiento aeronáutico.', fecha:'2026-01-15', url:'https://ejercitodelaire.defensa.gob.es', oficial:false, fuente:'aire' },
      { titulo:'Requisitos médicos actualizados para Tropa 2026', resumen:'El reglamento médico incorpora nuevos criterios de aptitud psicofísica adaptados a la normativa europea.', fecha:'2025-12-20', url:'https://defensa.gob.es', oficial:true, fuente:'ministerio' }
    ];
  }

  document.addEventListener('DOMContentLoaded', loadNewsPage);
</script>
</body>
</html>
